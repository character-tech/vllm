classi_names = ['annotations_adult_content', 'annotations_adult_content_v2', 'annotations_bad', 'annotations_bad_memory', 'annotations_bad_response', 'annotations_boring', 'annotations_broken_link', 'annotations_chosen_response', 'annotations_conspiracy_theories', 'annotations_contains_factual_information', 'annotations_contains_factual_information_that_may_change_with_time', 'annotations_custom_feedback', 'annotations_depressing', 'annotations_dislike', 'annotations_disrespectful_towards_anyone', 'annotations_disrespectful_towards_sensitive_groups', 'annotations_disturbing', 'annotations_disturbing_v2', 'annotations_diverting_communication', 'annotations_does_not_follow_instruction', 'annotations_doesnt_drive_conversation_forward', 'annotations_eatingdisorder', 'annotations_empathetic', 'annotations_ends_chat_early', 'annotations_engaging', 'annotations_especially_in_character', 'annotations_five_star', 'annotations_flag', 'annotations_follows_instruction_correctly', 'annotations_follows_instruction_incorrectly', 'annotations_four_star', 'annotations_funny', 'annotations_good!', 'annotations_good_response', 'annotations_great_response', 'annotations_harmful_promotes_hatespeech_red', 'annotations_harmful_promotes_physical_harm_to_others_red', 'annotations_harmful_promotes_selfharm', 'annotations_harmful_promotes_selfharm_red', 'annotations_harmful_promotes_terrorism', 'annotations_harmful_promotes_terrorism_red', 'annotations_helpful', 'annotations_i_dislike_this_image', 'annotations_i_hate_this_image', 'annotations_i_like_this_image', 'annotations_i_love_this_image', 'annotations_image_contains_text_that_is_unreadable_or_in_unknown_language', 'annotations_image_five_star', 'annotations_image_four_star', 'annotations_image_has_noticeable_defects', 'annotations_image_is_hard_to_understand', 'annotations_image_is_missing_key_elements_described_in_prompt', 'annotations_image_is_not_pleasing_to_the_eye', 'annotations_image_is_photorealistic', 'annotations_image_is_poorly_cropped', 'annotations_image_is_very_well_drawn_painted_photographed', 'annotations_image_may_be_disturbing_to_some_people', 'annotations_image_may_be_inappropriate_to_some_people', 'annotations_image_one_star', 'annotations_image_three_star', 'annotations_image_two_star', 'annotations_immoral', 'annotations_inaccurate', 'annotations_initiates_ending_chat', 'annotations_initiates_talking_about_adult_content', 'annotations_interesting', 'annotations_leak', 'annotations_like', 'annotations_long', 'annotations_looping', 'annotations_misleading', 'annotations_missing_factual_information', 'annotations_no_instruction_given', 'annotations_nonsense', 'annotations_nonsense_gd', 'annotations_ok_response', 'annotations_one_star', 'annotations_out_of_character', 'annotations_out_of_character_gd', 'annotations_pedophilia', 'annotations_phantom_context', 'annotations_politically_contentious', 'annotations_porn', 'annotations_potentially_controversial', 'annotations_potentially_harmful', 'annotations_potentially_harmful_financial_advice', 'annotations_potentially_harmful_medical_advice', 'annotations_potentially_harmful_v2', 'annotations_potentially_misleading', 'annotations_privacy_sensitive', 'annotations_profane', 'annotations_promising_to_do_something_later', 'annotations_racist', 'annotations_repetitive', 'annotations_rude_uncaring', 'annotations_scim', 'annotations_seeks_factual_information', 'annotations_selfharm', 'annotations_sexually_suggestive', 'annotations_sexually_suggestive_M_rated', 'annotations_sexually_suggestive_R_rated', 'annotations_sexually_suggestive_X_rated', 'annotations_sexually_suggestive_v2', 'annotations_short', 'annotations_superlike', 'annotations_swipe_selected', 'annotations_sx2_plus', 'annotations_sx3_plus', 'annotations_sx4_plus', 'annotations_terrible_response', 'annotations_three_star', 'annotations_truncated', 'annotations_two_star', 'annotations_ugly', 'annotations_unhelpful', 'annotations_unhelpful_factual_information', 'annotations_unsafe', 'annotations_violence', 'annotations_wrong_broken_link', 'annotations_wrong_facts', 'annotations_wrong_link', 'annotations_üëç', 'annotations_üëé', 'annotations_üòÄ', 'annotations_üòç', 'annotations_üòí', 'annotations_üòû', 'annotations_üò°', 'annotations_üòÆ', 'annotations_ü§ó', 'annotations_ü§£', 'annotations_ü§Æ', 'chosen_after_swipe_crowd_preference', 'chosen_after_swipe_preference', 'repetitive']


MODEL_SERVER_RANKING = [
        {"name": "chosen_after_swipe_crowd_preference", "pow": 0.5, "negation": False},
        {"name": "chosen_after_swipe_preference", "pow": 0.5, "negation": False},
    ]

def format_filter(filter_params_list):
    keys = ["name", "threshold"]
    if any([len(p) != len(keys) for p in filter_params_list]):
        raise ValueError(f"Expect 2 keys, seeing {filter_params_list=}")
    return [dict(zip(keys, vals)) for vals in filter_params_list]

DEFAULT_CHAR_SERVER_FILTER = format_filter(
        [
            ("annotations_porn", 0.1024),
            ("annotations_racist", 0.2856),
            ("annotations_disturbing", 0.1851),
            ("annotations_harmful_promotes_selfharm", 0.0629),
            ("annotations_harmful_promotes_terrorism", 0.1009),
        ]
    )